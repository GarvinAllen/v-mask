!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e=e||self).VueMask={})}(this,(function(e){"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?r(Object(o),!0).forEach((function(t){n(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):r(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}var i=[];function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"_";if(!u(e))throw new Error("Text-mask:convertMaskToPlaceholder; The mask property must be an array.");if(-1!==e.indexOf(t))throw new Error("Placeholder character must not be used as part of the mask. Please specify a character that is not present in your mask as your placeholder character.\n\n"+"The placeholder character that was received is: ".concat(JSON.stringify(t),"\n\n")+"The mask that was received is: ".concat(JSON.stringify(e)));return e.map((function(e){return e instanceof RegExp?t:e})).join("")}function u(e){return Array.isArray&&Array.isArray(e)||e instanceof Array}function c(e){for(var t,n=[];-1!==(t=e.indexOf("[]"));)n.push(t),e.splice(t,1);return{maskWithoutCaretTraps:e,indexes:n}}var l=[];function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!u(n)){if("function"!==t(n))throw new Error("Text-mask:conformToMask; The mask property must be an array.");n=c(n=n(e,r)).maskWithoutCaretTraps}var o=r.guide,i=void 0===o||o,f=r.previousConformedValue,s=void 0===f?"":f,p=r.placeholderChar,v=void 0===p?"_":p,d=r.placeholder,h=void 0===d?a(n,v):d,y=r.currentCaretPosition,m=r.keepCharPositions,g=!1===i&&void 0!==s,b=e.length,O=s.length,k=h.length,w=n.length,x=b-O,j=x>0,E=y+(j?-x:0),P=E+Math.abs(x);if(!0===m&&!j){for(var T="",S=E;S<P;S++)h[S]===v&&(T+=v);e=e.slice(0,E)+T+e.slice(E,b)}for(var M=e.split("").map((function(e,t){return{char:e,isNew:t>=E&&t<P}})),V=b-1;V>=0;V--){var A=M[V].char;if(A!==v){var C=V>=E&&O===w;A===h[C?V-x:V]&&M.splice(V,1)}}var _="",N=!1;e:for(var R=0;R<k;R++){var D=h[R];if(D===v){if(M.length>0)for(;M.length>0;){var U=M.shift(),L=U.char,$=U.isNew;if(L===v&&!0!==g){_+=v;continue e}if(n[R].test(L)){if(!0===m&&!1!==$&&""!==s&&!1!==i&&j){for(var z=M.length,H=null,I=0;I<z;I++){var J=M[I];if(J.char!==v&&!1===J.isNew)break;if(J.char===v){H=I;break}}null!==H?(_+=L,M.splice(H,1)):R--}else _+=L;continue e}N=!0}!1===g&&(_+=h.substr(R,k));break}_+=D}if(g&&!1===j){for(var W=null,q=0;q<_.length;q++)h[q]===v&&(W=q);_=null!==W?_.substr(0,W+1):""}return{conformedValue:_,meta:{someCharsRejected:N}}}var s={__nextCharOptional__:!0},p={"#":/\d/,A:/[a-z]/i,N:/[a-z0-9]/i,"?":s,X:/./},v=function(e){return t=e.toString().replace(/.(\/)[gmiyus]{0,6}$/,(function(e){return e.replace("/","?/")})),n=t.lastIndexOf("/"),new RegExp(t.slice(1,n),t.slice(n+1));var t,n},d=function(e){return e instanceof RegExp?e:function(e){return new RegExp("/[".concat(function(e){return"[\\^$.|?*+()".indexOf(e)>-1?"\\".concat(e):e}(e),"]/"))}(e)};function h(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:p;return e.split("").map((function(e,n,r){var o=t[e]||e,i=r[n-1],a=t[i]||i;return o===s?null:a===s?v(d(o)):o})).filter(Boolean)}var y=function(e,t){var n=document.createEvent("HTMLEvents");n.initEvent(t,!0,!0),e.dispatchEvent(n)},m=function(e){return e instanceof HTMLInputElement?e:e.querySelector("input")||e},g="undefined"!=typeof window&&window.navigator.userAgent.toLowerCase(),b=g&&g.indexOf("edge/")>0,O=g&&g.indexOf("android")>0,k=g&&/chrome\/\d+/.test(g)&&!b;var w=function(){var e=new Map,t={previousValue:"",mask:[]};function n(n){return e.get(n)||o({},t)}return{partiallyUpdate:function(t,r){e.set(t,o({},n(t),{},r))},remove:function(t){e.delete(t)},get:n}}();function x(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=function(){y.call(null,e,"input"),t()};O&&k?setTimeout(n,0):n()}function j(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},r=e.value,o=w.get(e),i=o.previousValue,a=o.mask,u=r!==i,c=r.length>i.length,l=r&&u&&c;if(t||l){var s=f(r,a,{guide:!1}),p=s.conformedValue;e.value=p,x(e,n)}w.partiallyUpdate(e,{previousValue:r})}function E(e,t,n){w.partiallyUpdate(e,{mask:h(t,n)})}function P(e){var n=o({},p);return null===e||Array.isArray(e)||"object"!==t(e)?n:Object.keys(e).reduce((function(t,n){var r=e[n];return r instanceof RegExp?(t[n]=r,t):t}),n)}function T(e,t){t&&e.$emit(t)}function S(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=P(e&&e.placeholders||null),n=e&&"string"==typeof e.maskedEvent?e.maskedEvent:"masked";return{bind:function(e,r,o){var i=r.value,a=o.context;E(e=m(e),i,t),j(e,!1,T.bind(null,a,n))},componentUpdated:function(e,r,o){var i=r.value,a=r.oldValue,u=o.context;e=m(e);var c=i!==a;c&&E(e,i,t),j(e,c,T.bind(null,u,n))},unbind:function(e){e=m(e),w.remove(e)}}}var M=S(),V=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.directive("mask",S(t))};e.VueMaskDirective=M,e.VueMaskPlugin=V,e.default=V,Object.defineProperty(e,"__esModule",{value:!0})}));
